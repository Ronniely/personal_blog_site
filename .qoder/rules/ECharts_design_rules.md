---
trigger: manual
---

# ECharts 设计规则

## 0. 核心设计原则

- **数据驱动**：以数据特性和分析目标为出发点，选择最合适的可视化方式
- **简洁清晰**：避免过度设计，突出数据本身的信息价值
- **一致性**：保持与博客整体设计风格和用户体验的一致性
- **可访问性**：确保图表对所有用户（包括视觉障碍用户）都可理解
- **性能优先**：在保证视觉效果的前提下，优化渲染性能

## 1. 配色规范

- **主色调**：使用博客主题色作为图表主色调，确保与整体设计风格一致
- **辅助色**：选择对比度适中的辅助色，避免视觉疲劳
- **背景色**：保持图表背景与页面背景一致，推荐使用浅色系
- **文字颜色**：确保图表文字与背景有足够的对比度，提高可读性
- **色盲友好**：避免使用红绿色组合，确保色盲用户也能区分不同数据系列

## 2. 图表类型选择矩阵

### 2.1 单一数据维度

- **比较类**：条形图、柱状图、雷达图
- **分布类**：直方图、箱线图
- **构成类**：饼图、环形图、堆叠柱状图
- **趋势类**：折线图、面积图

### 2.2 多数据维度

- **关系类**：散点图、气泡图
- **地理数据**：地图、热力图
- **层级数据**：树图、旭日图
- **流动数据**：桑基图、漏斗图

### 2.3 组合图表

- 双轴图（折线+柱状）
- 多系列混合图

### 2.4 特殊场景图表

- **实时数据**：动态折线图、仪表盘
- **排名变化**：瀑布图、排名条形图
- **占比变化**：动态饼图、面积图

## 3. 视觉设计规范

### 3.1 字体规范

- **标题**：16px，加粗
- **副标题**：14px
- **坐标轴标签**：12px
- **图例文字**：14px
- **数据标签**：12px
- **提示框文字**：13px

### 3.2 线条与网格

- **主线条**：2px 实线
- **辅助线条**：1px 实线
- **网格线**：1px 虚线，透明度 30%
- **坐标轴线**：1px 实线，颜色与主文字一致

### 3.3 间距规范

- **图表内边距**：上下左右各 20px
- **图例与图表间距**：15px
- **坐标轴标签与轴线间距**：8px
- **数据标签与图形元素间距**：5px

### 3.4 动画效果

- **入场动画**：启用平滑动画，持续时间 800ms
- **更新动画**：数据变化时启用 500ms 过渡动画
- **交互动画**：悬停效果响应时间不超过 200ms

## 4. 交互设计规则

### 4.1 基础交互

- **鼠标悬停**：提供详细的数据提示框，显示具体数值和单位
- **图例交互**：支持点击图例隐藏/显示对应数据系列
- **数据点选择**：支持点击数据点查看详细信息
- **区域缩放**：对于时间序列数据，提供框选缩放功能

### 4.2 高级交互

- **联动效果**：多个图表间支持联动高亮显示
- **数据钻取**：支持点击图表元素查看下钻数据
- **自定义筛选**：提供时间范围、数据维度等筛选控件

### 4.3 移动端交互

- **双指缩放**：支持双指手势进行图表缩放
- **长按操作**：长按显示数据详情
- **滑动切换**：在小屏幕设备上支持左右滑动查看数据

## 5. 响应式设计规则

### 5.1 尺寸适配

- **大屏设备**（>1200px）：使用完整功能和详细信息展示
- **中屏设备**（768px-1200px）：适当简化元素，保持核心功能
- **小屏设备**（<768px）：精简展示内容，突出关键数据

### 5.2 布局调整

- **图例位置**：大屏横向排列，小屏纵向排列或底部浮动
- **坐标轴密度**：根据屏幕尺寸自动调整标签密度
- **数据标签**：小屏幕设备上适当隐藏部分非关键标签

### 5.3 触控优化

- **点击区域**：确保可点击元素最小尺寸为 44px
- **手势支持**：支持滑动、缩放等触控手势
- **按钮尺寸**：交互按钮最小尺寸为 48px

## 6. 配置生成规则

### 6.1 基础配置

- **容器设置**：自动适配父容器尺寸，支持响应式宽度
- **主题配置**：基于博客主题色自动生成图表配色方案
- **语言设置**：根据用户语言偏好设置图表文字语言

### 6.2 数据配置

- **数据源适配**：支持多种数据格式（数组、对象、CSV等）
- **字段映射**：提供灵活的数据字段映射配置
- **默认处理**：自动识别时间、数值、分类等数据类型

### 6.3 功能配置

- **按需加载**：根据图表类型动态加载所需组件
- **性能优化**：大数据量时自动启用优化配置
- **兼容性处理**：自动处理不同浏览器的兼容性问题

## 7. 禁忌规则

### 7.1 设计禁忌

- ❌ 禁止使用过多颜色（超过7种主色）
- ❌ 禁止在饼图中使用立体效果
- ❌ 禁止在柱状图中使用渐变背景
- ❌ 禁止使用3D图表（除特殊需求外）
- ❌ 禁止在同图表中混用过多图表类型

### 7.2 数据禁忌

- ❌ 禁止在饼图中展示过多分类（超过6个）
- ❌ 禁止在折线图中连接不连续的时间点
- ❌ 禁止使用误导性的坐标轴起始值
- ❌ 禁止在柱状图中使用不一致的柱宽
- ❌ 禁止忽略数据的单位和量级

### 7.3 交互禁忌

- ❌ 禁止设置过长的动画时间（超过2秒）
- ❌ 禁止在移动端禁用缩放功能
- ❌ 禁止使用过于复杂的交互逻辑
- ❌ 禁止在提示框中展示过多信息
- ❌ 禁止忽略键盘导航支持

## 8. 最佳实践检查清单

### 8.1 设计检查

- [ ] 图表类型是否符合数据特性和展示目标
- [ ] 配色方案是否符合主题规范且色盲友好
- [ ] 字体大小是否适中且层次清晰
- [ ] 是否避免了不必要的装饰元素
- [ ] 图表标题和说明是否清晰准确

### 8.2 功能检查

- [ ] 是否提供了必要的交互功能
- [ ] 提示框信息是否完整且易读
- [ ] 图例是否清晰且支持交互
- [ ] 坐标轴标签是否完整且不重叠
- [ ] 数据标签是否在适当位置显示

### 8.3 性能检查

- [ ] 大数据量时是否启用了优化配置
- [ ] 动画效果是否流畅且不过度
- [ ] 是否按需加载了必要组件
- [ ] 移动端渲染是否流畅
- [ ] 是否处理了内存泄漏问题

### 8.4 兼容性检查

- [ ] 主流浏览器是否正常显示
- [ ] 移动端是否正常适配
- [ ] 屏幕阅读器是否可访问
- [ ] 不同分辨率下是否正常显示
- [ ] 是否支持键盘导航

## 9. 特殊场景规则

### 9.1 大数据量场景

- **采样策略**：超过10000数据点时启用智能采样
- **分页显示**：提供分页或滚动加载机制
- **聚合展示**：支持按时间或分类进行数据聚合
- **性能监控**：实时监控渲染性能并自动降级

### 9.2 实时数据场景

- **更新频率**：支持1秒到1小时的更新间隔设置
- **增量更新**：只更新变化的数据点
- **状态提示**：提供加载、错误等状态提示
- **缓存机制**：合理使用缓存减少重复请求

### 9.3 多语言场景

- **文本适配**：根据不同语言调整图表布局
- **字符支持**：确保支持各种语言字符集
- **日期格式**：根据语言环境自动调整日期格式
- **数字格式**：根据地区习惯调整数字和货币格式

### 9.4 无障碍访问场景

- **键盘导航**：支持完整的键盘操作
- **屏幕阅读器**：提供完整的ARIA标签
- **高对比度**：提供高对比度主题选项
- **文字替代**：为图表提供文字描述和数据表格
